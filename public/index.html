<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width = device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<!-- Bootstrap -->
	<link rel="stylesheet" href="styles/bootstrap.min.css">
	<link rel="stylesheet" media="screen and (min-device-width: 800px)" href="styles/style.css">
	<link rel="stylesheet" media="screen and (max-device-width: 799px)" href="styles/mobile.css">
	<link rel="stylesheet" href="scripts/alertify_css/alertify_default.min.css" />
	<link rel="stylesheet" href="scripts/alertify_css/alertify_core.min.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js" type="text/javascript"></script>
		<title>
			Sign-On Test
		</title>
	</head>
	<body ng-app="MainApp" ng-controller="MainCtrl">
		<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="navbar-brand" href="/">QBSE</a>
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
			            <span class="sr-only">Toggle navigation</span>
			            <span class="icon-bar"></span>
			            <span class="icon-bar"></span>
			            <span class="icon-bar"></span>
			        </button>
					<div id="navbar" class="navbar-collapse collapse">
						<ul class="nav navbar-nav">
							<li class="active"><a href="/market">Market</a></li>
						</ul>
						<p ng-if="authData" ng-switch="authData.provider" class="navbar-text navbar-right">Signed in as 
							<a ng-switch-when="password" href="/myaccount" class="navbar-link" id="email_link">{{profile.name}}</a>
							<a ng-switch-when="facebook" href="/myaccount" class="navbar-link" id="email_link">{{authData.facebook.displayName}}</a>
							<a ng-switch-when="google"href="/myaccount" class="navbar-link" id="email_link">{{authData.google.displayName}}</a>
							<a ng-switch-when="twitter"href="/myaccount" class="navbar-link" id="email_link">{{authData.twitter.displayName}}</a>
						</p>
						<ul ng-if="authData" class="nav navbar-nav navbar-right">
							<li><button type="button" class="btn btn-default navbar-btn" ng-click="logout()">Log Out</button></li>
						</ul>
						<ul ng-if="!authData" class="nav navbar-nav navbar-right">
							<li><a href="/signup">Sign Up</a></li>
							<li class="dropdown">
								<a class="dropdown-toggle" data-toggle="dropdown" href="#">
									Sign In
									<span class="caret"></span>
								</a>
								<div class="dropdown-menu">
									<form id="login_form" accept-charset="UTF-8" novalidate>
										<div class="input-group">
											<span class="input-group-addon" id="addon1">@</span>
											<input class="form-control" type="email" id="email" ng-model="useremail" placeholder="Email" aria-describedby="addon1">
										</div>
										<div class="input-group">
											<span class="input-group-addon" id="addon2">•••</span>
											<input class="form-control" type="password" id="password" ng-model="userpassword"placeholder="Password" aria-describedby="addon2">
										</div>
										<br/>
										<input class="btn btn-success btn-block" type="submit" ng-click="login(useremail, userpassword)" value="Submit">
										<input class="btn btn-warning btn-block" type="button" value="Forgot Password" onclick="forgotPassword()">
									</form>
									<hr/>
									<div class="btn-group-vertical btn-group-justified">
										<input class="btn btn-primary btn-block" type="button" value="Facebook" ng-click="thirdPartyLogin('facebook')">
										<input class="btn btn-danger btn-block" type="button" value="Google" ng-click="thirdPartyLogin('google')">
										<input class="btn btn-info btn-block" type="button" value="Twitter" ng-click="thirdPartyLogin('twitter')">
									</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</nav>
		<div class="container" ng-controller="QBCtrl">
			<!-- <div class="jumbotron">
				<h1>QBSE</h1>
				<p>The site is currently under construction. There is more to come in the coming weeks.</p>
			</div> -->
			<div id="stocks"></div>
			<div id="sidebar-menu" class="col-md-1 hidden-xs hidden-sm" ng-if="authData">
		        <ul ng-switch="authData.provider" class="main-menu nav nav-stacked affix">
		        	<li ng-switch-when="password" id="username">{{profile.name}}</li>
		        	<li ng-switch-when="facebook" id="username">{{authData.facebook.displayName}}</li>
		        	<li ng-switch-when="google" id="username">{{authData.google.displayName}}</li>
		        	<li ng-switch-when="twitter" id="username">{{authData.twitter.displayName}}</li>
		        	<li>
		        		<ul ng-repeat="(key,value) in profile.stocks">
		        			<li>
		        				{{key}}
		        				<li>{{value.amount}}, {{value.price}}</li>
		        			</li>
		        		</ul>
		        	</li>
		    	</ul>
		    </div>
				<ul class="list-group">
					<h2>Tier 1</h2>
			        <div ng-repeat="qb in qbs | filter: {tier: 1}">
					    <a id={{qb.reference}} class="list-group-item" ng-click="buyStock({{qb.reference}})">
						    <h5 class="list-group-item-heading">{{qb.$id}} <span class="label label-default pull-right">{{qb.price | currency}}</span></h5>
						    <p class="list-group-item-text">
						  		{{qb.displayInfo.yards}} yards, {{qb.displayInfo.TD}} TD, {{qb.displayInfo.INT}} INT, {{qb.displayInfo.Comp}}% 
						    </p>
					    </a>
				    </div>
			    </ul>
			    <ul class="list-group">
					<h2>Tier 2</h2>
			        <div ng-repeat="qb in qbs | filter: {tier: 2}">
					    <a id={{qb.reference}} class="list-group-item" ng-click="buyStock(this.id)">
						    <h5 class="list-group-item-heading">{{qb.$id}} <span class="label label-default pull-right">${{qb.price}}</span></h5>
						    <p class="list-group-item-text">
						  		{{qb.displayInfo.yards}} yards, {{qb.displayInfo.TD}} TD, {{qb.displayInfo.INT}} INT, {{qb.displayInfo.Comp}}% 
						    </p>
					    </a>
				    </div>
			    </ul>
			    <ul class="list-group">
					<h2>Tier 3</h2>
			        <div ng-repeat="qb in qbs | filter: {tier: 3}">
					    <a id={{qb.reference}} class="list-group-item" ng-click="buyStock(this.id)">
						    <h5 class="list-group-item-heading">{{qb.$id}} <span class="label label-default pull-right">${{qb.price}}</span></h5>
						    <p class="list-group-item-text">
						  		{{qb.displayInfo.yards}} yards, {{qb.displayInfo.TD}} TD, {{qb.displayInfo.INT}} INT, {{qb.displayInfo.Comp}}% 
						    </p>
					    </a>
				    </div>
			    </ul>
			    <ul class="list-group">
					<h2>Tier 4</h2>
			        <div ng-repeat="qb in qbs | filter: {tier: 4}">
					    <a id={{qb.reference}} class="list-group-item" ng-click="buyStock(this.id)">
						    <h5 class="list-group-item-heading">{{qb.$id}} <span class="label label-default pull-right">${{qb.price}}</span></h5>
						    <p class="list-group-item-text">
						  		{{qb.displayInfo.yards}} yards, {{qb.displayInfo.TD}} TD, {{qb.displayInfo.INT}} INT, {{qb.displayInfo.Comp}}% 
						    </p>
					    </a>
				    </div>
			    </ul>
		</div>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
		<script src="https://cdn.firebase.com/js/client/1.1.1/firebase.js"></script>
		<script src="https://cdn.firebase.com/libs/angularfire/1.0.0/angularfire.min.js"></script>
		<script type="text/javascript" src="scripts/jquery-1.11.1.min.js"></script>
		<!-- Modules -->
    	<script src="scripts/app.js"></script>
    	<!-- Controllers -->
    	<script src="scripts/angularControllers/MainController.js"></script>
		<script src="scripts/bootstrap.min.js"></script>
		<!-- Alertify -->
		<script type="text/javascript" src="scripts/alertify.min.js"></script>
		<!-- QBSE -->
		<!-- <script type="text/javascript" src="scripts/sessvars.js"></script> -->
		<!-- <script type="text/javascript" src="scripts/sessionModule.js"></script> -->
		<!-- <script type="text/javascript" src="scripts/signon.js"></script> -->
		<!-- <script src="scripts/stockTemplate.js"></script> -->
	</body>
</html>